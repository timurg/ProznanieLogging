# Проект EFK (Elasticsearch, Fluent Bit, Kibana)

## Описание

Этот проект представляет собой стек для сбора, хранения и визуализации логов с использованием Elasticsearch, Fluent Bit и Kibana. 

## Особенности

1. **Elasticsearch**:
   - Не мапит порт для прямого доступа за пределами сети `proznanie_net`.
   - Ограничен в использовании памяти до 1 гигабайта (512MB для JVM и 1GB общей памяти).
   - Используется для хранения и поиска логов.

2. **Fluent Bit**:
   - Доступен по порту 24224 для приема логов.
   - Не защищен от вандализма и атак типа log flooding и DoS, но защищен от чрезмерного потребления ресурсов.
   - Ограничен в использовании памяти до 256 мегабайт.
   - Используется для сбора и передачи логов в Elasticsearch.

3. **Kibana**:
   - Доступен по порту 5601 для визуализации логов.
   - Не защищен от вандализма и атак типа log flooding и DoS, но защищен от чрезмерного потребления ресурсов.
   - Ограничен в использовании памяти до 1 гигабайта.
   - Используется для визуализации и анализа логов.

4. **ILM Policy**:
   - Автоматически применяет политику управления жизненным циклом индекса (ILM) к Elasticsearch.
   - Ограничен в использовании памяти до 128 мегабайт.
   - Обеспечивает ротацию индексов и удаление старых данных.

## Достоинства

- **Эффективное использование ресурсов**: Все контейнеры ограничены в использовании памяти и процессора, что позволяет эффективно использовать ресурсы сервера.
- **Автоматическое управление индексами**: Политика ILM обеспечивает автоматическую ротацию индексов и удаление старых данных, что помогает управлять объемом хранимых логов.
- **Простота настройки и использования**: Стек легко настраивается и запускается с помощью Docker Compose.

## Недостатки

- **Отсутствие защиты от атак**: Fluent Bit и Kibana не защищены от вандализма и атак типа log flooding и DoS.
- **Ограниченные возможности безопасности**: Elasticsearch доступен только внутри сети `proznanie_net`, что ограничивает возможности прямого доступа и управления.
- **Ограниченные ресурсы**: Ограничение ресурсов может привести к снижению производительности при интенсивном использовании.

## Запуск

Для запуска стека выполните следующие команды:

```sh
# С осторожностью! Если часто перезапускаете, удалить неиспользуемые тома
docker volume prune -f

# Остановить и удалить старые контейнеры
docker compose down

# Запустить новые контейнеры
docker compose up --build -d